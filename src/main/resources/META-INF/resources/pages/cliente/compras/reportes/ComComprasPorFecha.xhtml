<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui" template="/templates/template.xhtml">
    <h:head>
        <script>
			PrimeFaces.locales['es'] = {
				closeText : 'Cerrar',
				prevText : 'Anterior',
				nextText : 'Siguiente',
				monthNames : [ 'Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo',
						'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre',
						'Noviembre', 'Diciembre' ],
				monthNamesShort : [ 'Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun',
						'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic' ],
				dayNames : [ 'Domingo', 'Lunes', 'Martes', 'Miércoles',
						'Jueves', 'Viernes', 'Sábado' ],
				dayNamesShort : [ 'Dom', 'Lun', 'Mar', 'Mie', 'Jue', 'Vie',
						'Sab' ],
				dayNamesMin : [ 'D', 'L', 'M', 'X', 'J', 'V', 'S' ],
				weekHeader : 'Semana',
				firstDay : 1,
				isRTL : false,
				showMonthAfterYear : false,
				yearSuffix : '',
				timeOnlyTitle : 'Sólo hora',
				timeText : 'Tiempo',
				hourText : 'Hora',
				minuteText : 'Minuto',
				secondText : 'Segundo',
				millisecondText : 'Milisegundo',
				currentText : 'Fecha actual',
				ampm : false,
				month : 'Mes',
				week : 'Semana',
				day : 'Día',
				allDayText : 'Todo el día',
				today : 'Hoy',
				clear : 'Claro'
			};


        </script>
    </h:head>
    <ui:define name="title">Compras por Fecha y Proveedor</ui:define>
    <ui:define name="content">
        <h:form id="form">
            <div class="grid crud-demo">
                <div class="col-12 md:col-6">
                    <div class="card ui-fluid">
                        <h5>Parametros</h5>
                        <div class="field grid">
                            <p:outputLabel for="proveedorLb"
                                           styleClass="col-12 mb-2 md:col-2 mb-md-0">Proveedor
                            </p:outputLabel>
                            <div class="col-12 md:col-10">
                                <p:inputText id="proveedorLb" placeholder="Pulse F9 para buscar"
                                             value="#{rptComComprasPorFechaProveedoresController.comProveedorSelected.bsPersona.nombreCompleto}"
                                             onkeydown="if (event.keyCode == 120) {
										PF('dlgProveedor').show()
									}"/>
                            </div>
                        </div>
                        <div class="field grid">
                            <p:outputLabel for="fecdesde"
                                           styleClass="col-12 mb-2 md:col-2 mb-md-0">Fecha Desde
                            </p:outputLabel>
                            <div class="col-12 md:col-10">
                                <p:datePicker id="fecdesde" autocomplete="off" showIcon="true"
                                              value="#{rptComComprasPorFechaProveedoresController.fecDesde}"
                                              pattern="dd/MM/yyyy"
                                              showButtonBar="true"
                                              mask="true"
                                              showOnFocus="false">
                                </p:datePicker>
                            </div>
                        </div>
                        <div class="field grid">
                            <p:outputLabel for="fechasta"
                                           styleClass="col-12 mb-2 md:col-2 mb-md-0">Fecha Hasta
                            </p:outputLabel>
                            <div class="col-12 md:col-10">
                                <p:datePicker id="fechasta" autocomplete="off" showIcon="true"
                                              value="#{rptComComprasPorFechaProveedoresController.fecHasta}"
                                              pattern="dd/MM/yyyy"
                                              showButtonBar="true"
                                              mask="true"
                                              showOnFocus="false">
                                </p:datePicker>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h5>Procesar</h5>
                        <div class="formgroup-inline flex align-items-center">

                            <div class="field col-4 md:col-2">
                                <p:outputLabel for="formato" value="Formato"/>
                            </div>
                            <div class="field col-4 md:col-4">
                                <p:selectOneMenu id="formato"
                                                 value="#{rptComComprasPorFechaProveedoresController.parametrosReporte.formato}">
                                    <f:selectItem itemLabel="Selecciona un formato"
                                                  itemValue="#{null}" noSelectionOption="true"/>
                                    <f:selectItem itemLabel="PDF" itemValue="PDF"/>
                                    <f:selectItem itemLabel="XLS" itemValue="XLS"/>
                                </p:selectOneMenu>
                            </div>
                            <div class="field col-4 md:col-4">
                                <p:commandButton ajax="false" value="Generar"
                                                 icon="pi pi-cloud-download"
                                                 actionListener="#{rptComComprasPorFechaProveedoresController.downloadReport}"
                                                 styleClass="ui-button-info"/>
                                <p:commandButton value="Limpiar"
                                                 icon="pi pi-sync"
                                                 update=":form"
                                                 actionListener="#{rptComComprasPorFechaProveedoresController.cleanFields}"
                                                 styleClass="ui-button-warning ml-2"/>
                            </div>


                        </div>

                    </div>
                    <!-- DIALOGOS -->
                    <p:dialog widgetVar="dlgProveedor" header="Buscar Proveedor"
                              width="650" showEffect="fade" modal="true">
                        <p:dataTable widgetVar="dtProveedor" var="proveedor"
                                     value="#{rptComComprasPorFechaProveedoresController.lazyModelProveedor}"
                                     id="dt-proveedor" paginator="true" rows="10"
                                     paginatorPosition="bottom" emptyMessage="No hay Registros">
                            <f:facet name="header">
                                <div class="products-table-header">
										<span class="filter-container ui-input-icon-left"> <i
                                                class="pi pi-search"></i> <p:inputText id="globalFilter"
                                                                                       onkeyup="PF('dtProveedor').filter()"
                                                                                       placeholder="Buscar..."/>
										</span>
                                </div>
                            </f:facet>
                            <p:column style="width:3rem;text-align: center">
                                <p:commandButton oncomplete="PF('dlgProveedor').hide()"
                                                 icon="pi pi-check-circle" title="Seleccionar"
                                                 update=":form:proveedorLb">
                                    <f:setPropertyActionListener value="#{proveedor}"
                                                                 target="#{rptComComprasPorFechaProveedoresController.comProveedorSelected}"/>
                                </p:commandButton>
                            </p:column>
                            <p:column headerText="Nombre"
                                      sortBy="#{proveedor.bsPersona.nombreCompleto}"
                                      filterBy="#{proveedor.bsPersona.nombreCompleto}"
                                      filterStyle="display:none; visibility:hidden;"
                                      filtarable="true" filterMatchMode="contains">
                                <h:outputText value="#{proveedor.bsPersona.nombreCompleto}"/>
                            </p:column>
                            <p:column headerText="Documento"
                                      sortBy="#{proveedor.bsPersona.documento}"
                                      filterBy="#{proveedor.bsPersona.documento}"
                                      filterStyle="display:none; visibility:hidden;"
                                      filtarable="true" filterMatchMode="contains">
                                <h:outputText value="#{proveedor.bsPersona.documento}"/>
                            </p:column>
                        </p:dataTable>
                    </p:dialog>
                    <!-- DIALOGOS -->
                </div>
            </div>

        </h:form>
    </ui:define>

</ui:composition>